<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>  
<div id="host"></div>

<template>
  <h1>Hello World!</h1>
  <script>
  var foo = 'bar';
  </script>
</template>
<!--
<template>  
  <h1>Hello World!</h1>
  <script>
  (function () {
    var foo = 'bar';
  }());
  </script>
</template>  



-->

<script>
  var host = document.querySelector('#host');
  var root = host.createShadowRoot();
  var template = document.querySelector('template');
  root.appendChild(document.importNode(template.content, true));
  console.log('window.foo = ' + window.foo);
</script>
</body>   

</html>
