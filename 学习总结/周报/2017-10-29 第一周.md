## 新坑
九月份开始对微信业务前端进行完整的重构

因为效果良好，其它业务部门也开始使用，同时暴露来一些问题

目前的脚手架可预见性的无法支撑明后年的业务规模，或者说将来前端的开发将会异常痛苦

有几下几点
- 引入 NPM 安装的资源时候该如何编译引入？
- 引入线上资源的时候该如何编译引入？
- 引入本地资源的时候该如何编译引入？
- 本地文件依赖线上文件的问题如何解决？
- 本地文件依赖本地文件的问题如何解决？
- 脚手架的自身更新如何向后兼容？
- 脚手架引入的 NPM 资源如何向后兼容？


上个月开发的 vinda 在一定程度下解决了开发时候所产生的各种路径问题，但是与当前业务绑定过强，配置化低，无法解决单一组件增量发布引用，跨部门项目极度割裂，而后两个问题在现阶段几本无解，用户端对配置强依赖，一旦存在内置配置需要更新，大规模的业务配置会失效，需要人员手动进行修正，很蠢

如何尽可能的降低构建配置的维护成本，并提高使用体验，是我们下一阶段需要解决的问题

### 工具的中心化与去中心化

目前集中式的项目配置看似通用，但是不可避免的会存在的要对实际业务进行配置修正，但一旦开放随意配置，脚手架将会与该业务锁死，无法升级，高可配置不等于高用户体验


在开发 vinda 的时候，前端 ls 持久化很大程度上借鉴了微信团队的 MOON.js，缓存的颗粒度缩小到单个文件，而又支持字符颗粒度的增量更新

我所设想的构建方案也类似如此，整个前端脚手架只是一个多个构建元因子的集成，我们不在围绕webpack作为构建核心，而把webpack作为构建因子的其中一个，而实际脚手架承担了中间层的作用

即实现一套DSL，而非 webpack.config.js 的复写来确保构建脚手架的中心化和配置项的去中心化

## 基于模块的异步加载

browser runtime loader，很老的技术，很老，老到我刚学代码时候就知道可以这么玩，将在十一月上半月全面部署

- 公用模块被加载一次以后缓存在本地，再次加载时更快速，且可以多页面共享
- 公用度越高的模块，只需要更新部分模块，其它未变化模块缓存在本地不变，更新后用户下载文件量相对小
- 可控制加载机制，让一部分非主要的内容（如首屏外内容等），等到使用时再载入
- 全局公用模块可独立上线（在保证兼容等问题的情况下），不用全线产品都跟着重新打包上线

未来要解决的 
- 碎文件的CDN同步文件时间是否同步问题
- 基于字符的增量更新
